<!DOCTYPE html>
<html>
<head>
	<style>
		.master {
			height:270px;
			width:800px;
			padding:10px;
			border:2px solid red; 
			background-color:green;margin:0 auto 0 auto;
		}
		div {
			height:100px;
			width:500px;
			padding:10px;
			border:2px solid red; 	
			background-color:blue;margin:0 auto 0 auto;
		}
		p	{
			background-color:orange;
			text-align:center;
		}
		span{
			background-color:purple;
			border:2px solid red;
		}
		</style>
		<script>

		window.onload = iniciar;

		// funcion que inicializa los manejadores
		function iniciar(){
			asociarEvento(document.body);
		}

		// funcion recursiva para asciar un manejador al elemento y a
		// sus hijos
		function asociarEvento(elemento){
			elemento.addEventListener("click", pintarAmarillo);
			let hijos = elemento.children;
			for (let i=0;i<hijos.length;i++){
				asociarEvento(hijos[i]);
			}
		}

		// funcion manejadora, pinta de amarillo el elemento
		function pintarAmarillo(event){
			this.style.backgroundColor = "yellow";
			event.stopPropagation();
		}
		</script>
		</head>
		<body>
			<div class="master">
				<div><p>Soy un parrafo.<span>Soy un span</span></p></div>
			</br>
			<div><p>Soy un parrafo.<span>Soy un span</span></p></div>
		</div>
	</body>
	</html>
